{% extends 'base.html' %}
{% block content %}

<!DOCTYPE HTML>		
<html>
<head>
	<h1>Result for a dog</h1>
	<h4>All dogs are available for adoption as of last update</h4> 
	<style>
		#map {
        height: 400px;
        width: 100%;
       }
    </style>
</head>
	<body>

		{% for animal_obj in animal_list %}
				Last Update: {{ animal_obj['lastUpdate'] }}<br>
				Breed: {{ animal_obj['breeds']['breed'] }}<br>
				Name: {{ animal_obj['name'] }}<br>
				Id: {{ animal_obj['id'] }}<br>
				Shelter Id: {{ animal_obj['shelterId'] }}<br>
				Size: {{ animal_obj['size'] }}<br>
				Gender: {{ animal_obj['sex'] }}<br>
				Age: {{ animal_obj['age'] }}<br>
				Mix: {{ animal_obj['mix'] }}<br>
				Description: {{ animal_obj['description'] }}<br>
				Address: {{ animal_obj['contact']['address1']}}
				{{ animal_obj['contact']['address2']}}
				{{ animal_obj['contact']['city'] }}
				{{ animal_obj['contact']['state']}}
				{{ animal_obj['contact']['zip']}}<br>
				<br>
				<br>
			  <img src="{{ animal_obj['media']['photos']['photo'][3]['#text'] }}">

				<button data-shelter="{{ animal_obj['shelterId'] }}" 
								data-status="{{ animal_obj['status'] }}"
								data-age="{{ animal_obj['age'] }}"
								data-breed="{{ animal_obj['breeds']['breed'] }}"
								data-name="{{ animal_obj['name'] }}"
								data-url="{{ animal_obj['media']['photos']['photo'][3]['#text'] }}"
								class="favorite" 
								id="{{ animal_obj['id'] }}" type="button">Favorite Me!</button>
				<br>
				<br>

		{% endfor %}
<script src="https://code.jquery.com/jquery.js"></script>

    <script>
		function addDogToFavorites(evt){
			var button_id = ("#" + this.id);
			var shelter_id = $(button_id).data("shelter");
			var adopted_status = $(button_id).data("status");
			var age = $(button_id).data("age");
			var breed = $(button_id).data("breed");
			var name = $(button_id).data("name")
			var img_url = $(button_id).data("url");
    
			form_data = {'petfinder_id': this.id, 
									 'shelter': shelter_id, 
									 'status': adopted_status, 
									 'age': age, 
									 'breed': breed,
									 'name' : name,
									 'url': img_url};

		$.post('/favorites', form_data, addToFavoritesSuccess);

		}

		function addToFavoritesSuccess(result){

			console.log("Dog Added")
		} 


	$('.favorite').on('click', addDogToFavorites); 

	</script>
  <form action="/">
    <input type="submit" value="Homepage">
  </form>
</body>
</html>

{% endblock %}